<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sign Up | MyStore</title>
  <link rel="stylesheet" href="auth.css" />
</head>
<body>

<div class="auth-box">
  <h2>Create Account</h2>

  <!-- <input type="text" placeholder="Name" />
  <input type="email" placeholder="Email" />
  <input type="password" placeholder="Password" />

  <button>Sign Up</button> -->


  
  <!-- <input type="email" placeholder="Email" id="email" />
<button onclick="sendOtp()">Send OTP</button>

<input type="text" placeholder="Enter OTP" id="otp" disabled />
<button onclick="verifyOtp()">Verify OTP</button>

<input type="password" placeholder="Password" id="password" disabled />
<button onclick="signup()">Create Account</button> -->


  <input type="text" id="name" placeholder="Name" />
<input type="email" id="email" placeholder="Email" />
  <button onclick="sendOtp()">Send OTP</button>
<input type="text" id="otp" placeholder="Enter OTP" disabled />
  <button onclick="verifyOtp()">Verify OTP</button>
<input type="password" id="password" placeholder="Password" disabled />
<button onclick="signup()">Create Account</button> -->
  
  <p>Already have an account? <a href="login.html">Login</a></p>
</div>


<!-- <script>
const API = "https://my-store-w94t.onrender.com";

async function sendOtp() {
  const email = email.value;
  const res = await fetch(`${API}/api/otp/send`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email })
  });
  alert("OTP sent");
}

async function verifyOtp() {
  const email = document.getElementById("email").value;
  const otp = document.getElementById("otp").value;

  const res = await fetch(`${API}/api/otp/verify`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email, otp })
  });

  if (res.ok) {
    document.getElementById("password").disabled = false;
    alert("Email verified");
  } else {
    alert("Wrong OTP");
  }
}
</script> -->

  <script>
const API = "https://my-store-w94t.onrender.com";

async function sendOtp() {
  const emailInput = document.getElementById("email");
  const email = emailInput.value;

  if (!email) {
    alert("Please enter email first");
    return;
  }

  const res = await fetch(`${API}/api/otp/send`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email })
  });

  const data = await res.json();
  alert(data.message);

  // enable OTP input
  document.getElementById("otp").disabled = false;
}

async function verifyOtp() {
  const email = document.getElementById("email").value;
  const otp = document.getElementById("otp").value;

  if (!otp) {
    alert("Enter OTP");
    return;
  }

  const res = await fetch(`${API}/api/otp/verify`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email, otp })
  });

  const data = await res.json();

  if (res.ok) {
    alert("Email verified");
    document.getElementById("password").disabled = false;
  } else {
    alert(data.message);
  }
}

async function signup() {
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  const res = await fetch(`${API}/api/auth/signup`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name, email, password })
  });

  const data = await res.json();
  alert(data.message);

  if (res.ok) window.location.href = "login.html";
}
</script>

  
</body>
</html>



