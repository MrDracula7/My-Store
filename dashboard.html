<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>

<div class="dashboard">
  <img id="profilePhoto" class="avatar" />
  <h2 id="name"></h2>
  <p id="email"></p>

  <form id="profileForm">
    <input type="text" id="newName" placeholder="Update name" />
    <input type="file" id="photo" />
    <button type="submit">Update Profile</button>
  </form>

  <button id="logoutBtn" class="logout">Logout</button>
</div>

<script>
    const token = localStorage.getItem("token");

if (!token) {
  window.location.href = "login.html";
}

fetch("https://my-store-w94t.onrender.com/api/dashboard", {
  headers: {
    Authorization: "Bearer " + token
  }
})
.then(res => res.json())
.then(data => {
  document.getElementById("email").innerText = "Email: " + data.email;
});

  document.getElementById("logoutBtn").addEventListener("click", () => {
  localStorage.removeItem("token");
  window.location.href = "login.html";
});

</script>
</body>
</html>
